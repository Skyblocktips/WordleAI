<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wordle 1v1 AI</title>
    <style>
        /* Body Styling */
        body {
            font-family: 'Courier New', Courier, monospace;
            margin: 0;
            padding: 0;
            background-color: #000;
            color: #00ff00;
            text-align: center;
        }

        /* Header Styling */
        header {
            padding: 20px;
            text-shadow: 0 0 10px #00ff00;
        }

        header h1 {
            font-size: 3em;
            margin: 0;
        }

        header p {
            font-size: 1.2em;
        }

        /* Difficulty Section */
        #difficulty-selection {
            margin: 20px auto;
            max-width: 600px;
            padding: 20px;
            border: 2px solid #00ff00;
            border-radius: 10px;
            text-align: center;
            background-color: #111;
        }

        #difficulty-selection h2 {
            text-shadow: 0 0 5px #00ff00;
            font-size: 1.5em;
        }

        #result {
            margin-top: 20px;
            font-size: 1.5em;
        }

        footer {
            margin-top: 30px;
            padding: 20px;
            font-size: 1em;
            text-shadow: 0 0 5px #00ff00;
            background-color: #000;
            border-top: 2px solid #00ff00;
        }

        button {
            margin: 10px;
            padding: 10px;
            font-size: 1em;
            border: none;
            border-radius: 5px;
            background-color: #00ff00;
            color: #000;
            cursor: pointer;
        }

        button:hover {
            background-color: #558a50;
        }
    </style>
</head>
<body>
    <header>
        <h1>Wordle 1v1 AI</h1>
        <p>Player vs AI: Can you win?</p>
    </header>

    <section id="difficulty-selection">
        <h2>Select Difficulty</h2>
        <button onclick="setDifficulty('easy')">Easy</button>
        <button onclick="setDifficulty('medium')">Medium</button>
        <button onclick="setDifficulty('hard')">Hard</button>
        <button onclick="setDifficulty('impossible')">Impossible</button>
    </section>

    <div id="game-board"></div>
    <div id="result"></div>

    <footer>
        <p>&copy; 2025 Wordle Challenge. All Rights Reserved.</p>
    </footer>

    <script>
        let words = [];
        let difficulty = 'easy';

        fetch('five-letter-words.json')
            .then(response => response.json())
            .then(data => {
                words = data;
                initializeGame();
            })
            .catch(error => console.error('Error loading dictionary:', error));

        let targetWord = "";
        let aiPossibleWords = [];
        const maxAttempts = 6;
        let currentAttempt = 0;

        function setDifficulty(level) {
            difficulty = level;
            console.log(`Difficulty set to ${level}`);
            initializeGame();
        }

        function initializeGame() {
            if (!words.length) {
                console.error("Word list is empty or not loaded yet.");
                return;
            }

            targetWord = words[Math.floor(Math.random() * words.length)];
            aiPossibleWords = [...words];

            const gameBoard = document.getElementById("game-board");
            gameBoard.innerHTML = "";

            for (let i = 0; i < maxAttempts; i++) {
                const guessPair = document.createElement("div");
                guessPair.classList.add("guess-pair");

                const playerRow = document.createElement("div");
                playerRow.classList.add("guess-row");
                playerRow.id = `player-row-${i}`;

                const aiRow = document.createElement("div");
                aiRow.classList.add("guess-row");
                aiRow.id = `ai-row-${i}`;

                for (let j = 0; j < 5; j++) {
                    const playerBox = document.createElement("div");
                    playerBox.classList.add("letter-box");
                    playerRow.appendChild(playerBox);

                    const aiBox = document.createElement("div");
                    aiBox.classList.add("letter-box", "ai-guess-box");
                    aiRow.appendChild(aiBox);
                }

                guessPair.appendChild(playerRow);
                guessPair.appendChild(aiRow);
                gameBoard.appendChild(guessPair);
            }

            const inputRow = document.createElement("div");
            inputRow.innerHTML = `
                <input type="text" id="guess-input" maxlength="5" placeholder="Enter your guess">
                <button onclick="makeGuess()">Submit</button>
            `;
            gameBoard.appendChild(inputRow);

            console.log("Target word is:", targetWord);
        }

        function aiGuess() {
            if (aiPossibleWords.length === 0) return null;

            let guess;
            if (difficulty === 'easy') {
                guess = aiPossibleWords[Math.floor(Math.random() * aiPossibleWords.length)];
            } else if (difficulty === 'medium') {
                guess = aiPossibleWords[0]; // Simplistic AI logic for medium
            } else {
                // Hard difficulty: prioritize words based on feedback matching logic
                guess = aiPossibleWords.find(word => word.includes(targetWord[0])) || aiPossibleWords[0];
            }

            const feedback = getFeedback(guess, targetWord);
            aiPossibleWords = aiPossibleWords.filter(word => isValidWord(word, guess, feedback));
            console.log(`AI (${difficulty}) guessed:`, guess);
            return { guess, feedback };
        }

        function getFeedback(guess, target) {
            const feedback = Array(target.length).fill("_");
            const targetCounts = {};

            for (const letter of target) {
                targetCounts[letter] = (targetCounts[letter] || 0) + 1;
            }

            for (let i = 0; i < guess.length; i++) {
                if (guess[i] === target[i]) {
                    feedback[i] = "G";
                    targetCounts[guess[i]] -= 1;
                }
            }

            for (let i = 0; i < guess.length; i++) {
                if (feedback[i] === "_" && targetCounts[guess[i]] > 0) {
                    feedback[i] = "Y";
                    targetCounts[guess[i]] -= 1;
                }
            }

            return feedback;
        }
    </script>
</body>
</html>
